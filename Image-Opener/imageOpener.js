var imageOpener=(()=>{function n(e,l,o,u){return new(o=o||Promise)(function(n,i){function t(e){try{r(u.next(e))}catch(e){i(e)}}function a(e){try{r(u.throw(e))}catch(e){i(e)}}function r(e){var i;e.done?n(e.value):((i=e.value)instanceof o?i:new o(function(e){e(i)})).then(t,a)}r((u=u.apply(e,l||[])).next())})}var a={uri:"",uid:"",apiType:""},i={fetchImageUrl:async function(){var e=await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/${a.apiType}/`+a.uid);return("tracks"!==a.apiType?e:e.album).images[0].url},send:{notification:function(e,i=!1,n){Spicetify.showNotification(e,i,n)},clipboard:async function(e){e&&await Spicetify.Platform.ClipboardAPI.copy(e)}}},u={openLink:function(e){window.open(e)},getApiType:function(e){var i=Spicetify.URI["Type"];switch(e){case i.TRACK:return"tracks";case i.LOCAL:return"local";case i.ALBUM:return"albums";case i.SHOW:return"shows";case i.EPISODE:return"episodes";case i.PROFILE:return"users";default:return null}},createImageElement:async function(){var e=(await Spicetify.Platform.LocalFilesAPI.getTracks()).filter(e=>e.uri===a.uri)[0].album.images[0].url,i=document.createElement("img");return i.src=e,i}},s='<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="16px" height="16px" viewBox="0 0 512.000000 512.000000"><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="currentcolor" stroke="none"><path d="M453 4945 c-35 -8 -93 -28 -130 -46 -93 -45 -217 -169 -261 -261 -66 -136 -63 -15 -60 -2111 l3 -1902 27 -74 c64 -174 198 -306 370 -362 l73 -24 2085 0 2085 0 73 24 c172 56 306 188 370 362 l27 74 3 1902 c3 2096 6 1975 -60 2111 -44 92 -168 216 -260 260 -134 65 0 62 -2243 61 -1679 0 -2051 -3 -2102 -14z m3028 -874 c117 -37 226 -122 300 -234 179 -274 74 -650 -222 -796 -360 -177 -773 61 -805 464 -21 263 173 520 439 580 80 19 202 12 288 -14z m-1623 -1130 c20 -11 50 -33 67 -50 16 -18 250 -320 520 -673 450 -589 494 -643 544 -671 64 -36 144 -40 207 -11 22 10 114 91 205 180 175 171 194 184 285 184 59 0 133 -41 176 -97 82 -109 613 -871 634 -912 41 -75 25 -144 -40 -175 -31 -15 -191 -16 -1858 -16 -1755 0 -1825 1 -1858 19 -47 24 -80 75 -80 120 0 20 11 61 23 91 50 120 980 1947 1005 1974 52 56 109 68 170 37z"/></g></svg>',e=(()=>{let t;function i(n){var e=Spicetify.URI["Type"];if(1!==n.length)return!1;var i=Spicetify.URI.fromString(n[0]);switch(i.type){case e.TRACK:case e.LOCAL:case e.ALBUM:case e.SHOW:case e.EPISODE:case e.PROFILE:return async function(e){var i;a.uri=n[0],a.uid=null!=(i=e.id)?i:e.username,a.apiType=u.getApiType(e.type),"local"===a.apiType?t.name="Copy Image":t.name="Open Image",a.isCtrlPressed=!1}(i),!0;default:return!1}}return{add:function(e){(t=new Spicetify.ContextMenu.Item("Open Image",e,i,s)).register()}}})(),t=(()=>{let t,a,r;const l={};return{add:function(){t=new Spicetify.ContextMenu.Item("Avatar",e=>u.openLink(l[e[0]].avatar),n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.avatar);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.avatar?t.disabled=!1:t.disabled=!0})(),!0),s),a=new Spicetify.ContextMenu.Item("Banner",e=>u.openLink(l[e[0]].banner),n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.banner);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.banner?a.disabled=!1:a.disabled=!0})(),!0),s,!1),r=new Spicetify.ContextMenu.Item("Open Gallery",e=>{null!=(e=l[e[0]])&&e.gallery.forEach(e=>{u.openLink(e.sources[0].url)})},n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.gallery);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.gallery.length?r.disabled=!1:r.disabled=!0})(),!0),s,!1),new Spicetify.ContextMenu.SubMenu("Open Image",[t,a,r],e=>{return async function(e){var i,n;Spicetify.URI.fromString(e).type===Spicetify.URI.Type.ARTIST&&void 0===(null==(n=l[e])?void 0:n.avatar)&&(n=await Spicetify.GraphQL.Request(Spicetify.GraphQL.Definitions.queryArtistOverview,{uri:e,locale:"en"}),l[e]=null!=(i=l[e])?i:{},l[e].avatar=null!=(i=null==(i=null==(i=null==(i=n.data.artistUnion.visuals)?void 0:i.avatarImage)?void 0:i.sources[0])?void 0:i.url)?i:null,l[e].banner=null!=(i=null==(i=null==(i=null==(i=n.data.artistUnion.visuals)?void 0:i.headerImage)?void 0:i.sources[0])?void 0:i.url)?i:null,l[e].gallery=null!=(n=null==(e=null==(i=n.data.artistUnion.visuals)?void 0:i.gallery)?void 0:e.items)?n:null)}(e[0]),e=e,i=Spicetify.URI.Type,1===e.length&&Spicetify.URI.fromString(e[0]).type===i.ARTIST;var i}).register()}}})(),r=(()=>{let t,a,r;const l={};function o(e,i){return"spotify"===i&&e&&e.includes("https://i.scdn.co/image/")&&"2"===e.charAt(39)?e.substring(0,39)+"4"+e.substring(40):e&&e.includes("https://i.scdn.co/image/")&&"d"===e.charAt(36)&&"a"===e.charAt(37)&&"8"===e.charAt(38)&&"4"===e.charAt(39)?e.substring(0,36)+"bebb"+e.substring(40):e}return{add:function(){t=new Spicetify.ContextMenu.Item("Cover Art",e=>u.openLink(l[e[0]].coverArt),n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.coverArt);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.coverArt?t.disabled=!1:t.disabled=!0})(),!0),s),a=new Spicetify.ContextMenu.Item("Banner",e=>u.openLink(l[e[0]].banner),n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.banner);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.banner?a.disabled=!1:a.disabled=!0})(),!0),s,!1),r=new Spicetify.ContextMenu.Item("Mobile Banner",e=>u.openLink(l[e[0]].mobileBanner),n=>((async()=>{for(var e,i;void 0===(null==(e=l[n[0]])?void 0:e.mobileBanner);)await new Promise(e=>setTimeout(e,10));null!=(i=l[n[0]])&&i.mobileBanner?r.disabled=!1:r.disabled=!0})(),!0),s,!1),new Spicetify.ContextMenu.SubMenu("Open Image",[t,a,r],e=>{!async function(e){var i,n=Spicetify.URI.fromString(e).type;n!==Spicetify.URI.Type.PLAYLIST&&n!==Spicetify.URI.Type.PLAYLIST_V2||void 0!==(null==(n=l[e])?void 0:n.avatar)||(n=await Spicetify.GraphQL.Request(Spicetify.GraphQL.Definitions.fetchPlaylistMetadata,{uri:e,offset:0,limit:0}),l[e]=null!=(i=l[e])?i:{},"spotify:user:spotify"===(null==(i=null==(i=null==(i=n.data.playlistV2)?void 0:i.ownerV2)?void 0:i.data)?void 0:i.uri)?l[e].coverArt=o(null==(i=null==(i=null==(i=null==(i=n.data.playlistV2)?void 0:i.images)?void 0:i.items[0])?void 0:i.sources[0])?void 0:i.url,"spotify"):l[e].coverArt=o(null==(i=null==(i=null==(i=null==(i=n.data.playlistV2)?void 0:i.images)?void 0:i.items[0])?void 0:i.sources[0])?void 0:i.url),l[e].banner=null!=(i=null==(i=null==(i=null==(i=n.data.playlistV2)?void 0:i.attributes)?void 0:i.filter(e=>"header_image_url_desktop"===e.key)[0])?void 0:i.value)?i:null,l[e].mobileBanner=null!=(i=null==(n=null==(e=null==(i=n.data.playlistV2)?void 0:i.attributes)?void 0:e.filter(e=>"image_url"===e.key)[0])?void 0:n.value)?i:null)}(e[0]);var i=Spicetify.URI.Type;if(1!==e.length)return!1;switch(Spicetify.URI.fromString(e[0]).type){case i.PLAYLIST:case i.PLAYLIST_V2:return!0;default:return!1}}).register()}}})();async function l(){e.add(async()=>{var e;"local"===a.apiType?(await function(i){return n(this,void 0,void 0,function*(){var e={[i.type]:i},e=new ClipboardItem(e);yield navigator.clipboard.write([e])})}(await function(l){return n(this,void 0,void 0,function*(){return new Promise(function(i,n){var e,t,a=document.createElement("canvas"),r=a.getContext("2d");r&&({width:e,height:t}=l,a.width=e,a.height=t,r.drawImage(l,0,0,e,t),a.toBlob(function(e){e?i(e):n("Cannot get blob from image element")},"image/png",1))})})}(await u.createImageElement())),i.send.notification("Image copied")):(e=await i.fetchImageUrl(),u.openLink(e))}),t.add(),r.add()}(async()=>{(async function(){for(;null==Spicetify||!Spicetify.Menu||null==Spicetify||!Spicetify.ContextMenu;)await new Promise(e=>setTimeout(e,10));l()})()})()})();